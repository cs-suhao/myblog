## 8.3 报文完整性和数字签名

### 8.3.1 密码散列函数

散列函数以`m`为输入，计算得到一个称为散列的固定长度的字符串`H(m)`。并且不存在`x!=y-->H(x)=H(y)`的情况出现。

常见的密码散列函数有MD5，SHA-1等。


### 8.3.2 报文鉴别码MAC

首先通信双方共享秘密`s`，然后执行报文完整性鉴别的过程如下：
1. Alice生成报文`m`，用`s`级联`m`生成`m+s`，并计算散列`H(m+s)`。这里的`H(m+s)`被称为报文鉴别码(MAC)
2. Alice将MAC附加到报文`m`上，生成扩展报文`(m,H(m+s))`，发送给Bob。
3. Bob收到扩展报文`(m,h)`，计算报文鉴别码`H(m+s)`并进行验证。

### 8.3.3 数字签名

数字签名用于验证身份，使用了非对称加密的技术。由于私钥是Bob独有的密钥，因此如果该明文使用Bob的私钥进行加密，能够通过Bob提供的公钥进行解密，这样就可以验证加密方是Bob本人。

但是由于对整个报文进行加解密计算量太大，在身份验证上明显不划算，因此我们使用散列函数，首先计算报文的**指纹**，也就是该报文的固定长度散列，之后对指纹进行私钥签名。

### 8.3.4 公钥认证

上述的数字签名存在一个问题，Alice是通过Bob的公钥判断是否是Bob本人，但是如果有人故意篡改了Bob的公钥，并使用对应的私钥进行签名，Alice是无法洞悉的。

因此，网络中存在CA(Certification Authority)认证中心，将公钥和实体进行绑定。X509就规定了证书的鉴别服务和特定语法。