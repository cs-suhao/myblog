# 计网面经

## 应用层

1. 浏览器从发起请求到获得资源，中间有哪些过程？
   
   > 1. 浏览器首先将url进行拆分解析，找到协议、域名、端口等字段。
   > 2. 浏览器根据域名去本地hosts文件中寻找，如果没有找到会使用DNS协议进行域名解析，这里会涉及**DNS解析**的过程。
   > 3. 浏览器拿到服务器的IP地址以后，发送HTTP请求，**HTTP请求报文的字段填充**。
   > 4. HTTP报文由TCP封装发送，客户端和服务器经过**三次握手**建立连接。
   > 5. IP协议（IPv4）将TCP报文切片发送，中间经过**ARP协议**解析服务器IP地址对应的MAC地址，再通过各种**路由选择**最终到达服务器。
   > 6. 服务器收到请求后，返回HTTP响应报文。
   > 7. 当其中一方完成数据传输后，发起关闭连接请求，进行TCP的**四次挥手**过程。
   > 
   > [](image/summary/1.1.png)

2. 如果发送了一个HTTP请求（输入一个url到页面展现），整个过程是什么样的？
   
   > 同上。
   > [](image/summary/1.1.png)


3. HTTP的请求报文和响应报文的结构？
   
   > - 请求报文：**请求行+首部行+空行+实体体**
   > 
   >     其中，请求行由**方法、URL、HTTP版本**三个字段构成。首部行由关键字/值对组成，每行一对，包括浏览器类型、请求主机名，连接是否关闭等。

   > - 响应报文：状态行+首部行+实体体
   > 
   >     其中，状态行由**版本、状态码、状态信息短语**三个字段构成。

4. HTTP中的cookie是什么，请详细说一说？
   
   > cookie是一段键值对文本，是用于补充HTTP协议的无状态性质，让服务器能够识别用户身份，以此提供个性化的服务。
   > 
   > cookie的步骤如下：用户第一次与某网站建立连接，服务器会为用户创建ID，然后在响应报文中加入该cookie ID，之后用户在发送请求报文时，会在首部行加入该网站的cookie值，这样服务器端就会将该用户在本网站的一些列操作都存储下来。可以用于身份识别。
   > 
   > cookie会带来的问题：由于cookie是保存在终端这一侧，因此也就意味着是可以被人为修改和冒用的。冒用和劫持cookie可能会产生会话劫持、XSS攻击、跨站请求伪造等攻击。
   > 
   > 如果想要安全，可以使用session代替cookie。

   > [参考](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies)

5. 讲一讲代理服务器是如何运作的？
   
   > 代理服务器又称为Web缓存器，通常是由ISP购买并安装，充当中间商和防火墙的作用。当用户发送一个web请求，首先经过代理服务器，代理服务器会查询本地存储中是否有相应的资源，如果找到相应资源，代理服务器会进行内容检查，通过**条件GET**，其中有字段`if-modified-since`。如果没有，代理服务器会充当web请求发起人，向目标服务器发送请求，将请求到的副本存储在本地。
   > 
   > 因为代理服务器可能会修改用户的web请求，同时也会过了目标服务器返回的资源，因此可以充当防火墙或web过滤器。

6. HTTP协议常用的方法有哪些？
   > - GET :请求指定的页面信息，并返回实体主体。
   > - POST :向指定资源提交数据进行处理，数据在请求体中。
   > - HEAD :类似于GET，但是只返回报头。
   > - PUT :从客户端向服务器传送的数据取代指定的文档的内容。
   > - DELETE :请求服务器删除指定的页面。
   > - CONNECT :略。
   > - OPTIONS :允许客户端查看服务器的性能。
   > - TRACE :回显服务器收到的请求，主要用于测试或诊断。
   > - PATCH :是对 PUT 方法的补充，用来对已知资源进行局部更新 。

7. HTTP1.0，1.1，2.0的区别？
   > 1. 1.*面向文本传输，2.0面向二进制传输，更高效。
   > 2. 1.*的头部信息未压缩，2.0压缩头部信息。
   > 3. 1.*每个请求都要建立连接，串行工作，2.0支持多路复用，并行工作。
   > 4. 1.*不支持服务器推送，2.0支持服务器主动推送。 
   > 
8. 服务端如何处理/解析HTTP请求？
   > 1. 建立TCP连接
   > 2. 接受http请求
   > 3. 解析http请求：解析请求行和首部行
   > 4. 访问对应资源
   


9.  **服务端如何同时处理多个请求？**
   > 1
   > 2
   > 3
   > 
10. **如果输入网址打不开网页，如何排查问题？**
11. **我们在访问之前访问过的网站，不需要重新登录，是如何实现的？**
12. **假设安全应用场景，如果我们将别人电脑中的cookie拷贝，是否可以伪造身份进行登录？用什么方法检测和避免呢？**
13. **HTTP和HTTPS协议是什么？有什么区别？**
14. **HTTPS连接的过程与步骤？**
15. **HTTPS的缺点？**
16. **DNS是什么，如何进行解析的？**
17. **DNS劫持了解吗？如何防范？**
18. 

## 传输层

1. **视频流使用什么协议？**
   
   > 理论上来说，视频流具有**时延敏感**和**容忍丢包**的特点，应该使用UDP流，但是因为UDP无法控制带宽，所以大型视频网站一般使用HTTP流和适应性HTTP流，底层使用的是TCP协议。

2. **TCP是如何保证可靠通信呢？**
3. **TCP协议连接过程是什么样的？**
4. **TCP协议断开连接的过程是什么样的？**
5. **TCP为什么连接的时候是三次握手，关闭的时候却是四次握手？**
6. **为什么不能用两次握手进行连接？**
7. **TCP的四次挥手为什么需要等2MSL？如果不等待会就关闭有什么问题？**
8. **TCP的报文头是什么样的？**
9. **什么情况下机器会产生大量的TIME_WAIT，会有什么影响？**

10. **拥塞控制了解吗？**
11. **介绍一下TCP和UDP的应用场景。**
12. **拥塞窗口和滑动窗口的区别？**
13. **如何使用UDP，还能够实现可靠传输？**

## 网络层

1. **简要说一下IP协议？**
2. **知道一个IP地址，是如何找到服务器的？**
3. **IPv4和IPv6的区别？**
4. **子网掩码的作用，如何划分和计算？**
5. **广播地址和网络地址是什么？**
6. 路由协议部分待补充

## 其他

1. **网络协议为什么要分层？**
2. **Rust协议有了解吗？**