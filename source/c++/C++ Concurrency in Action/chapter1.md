# Chapter 1. 你好，并发世界

## 1.1 何谓并发

### 1.1.1 计算机的并发

计算机的并发指的是单个系统中同时执行多个独立的任务。在拥有多个处理器单元的机器中，能够并行执行多个任务，是真正的并发，也可以称为“硬件并发”。而在只有单核的处理器中，是通过任务切换来实现一种“并发的假象”，这两种的区别如下图：
![真并发vs任务切换](image/chapter1/1-1.png)
其中单核机器做任务切换时，红绿块中有一个灰色块，这代表切换任务的开销，因为在进行任务切换时，操作系统必须保存当前任务CPU的状态和指令指针，并计算需要切换到哪个任务，再将切换的任务加载。

但是处理器核心再多，也有比“可并行最大任务数”还要多的任务需要执行，所以任务切换在这些情况下任然是适用的。例如计算机会有很多后台程序，并且在运行后台程序的同时，我们还会同时运行编译器、浏览器等。

下图显示了四个任务在两个核心之间的切换，图中任务块的大小是理想情况，实际中受多因素影响，任务分割会不均匀，调度也会不规则。
![四任务在两核心中切换](image/chapter1/1-2.png)

### 1.1.2 并发的方式

