## 6.6 死锁预防

死锁避免本质上不可能，因此实际的系统完全是通过破坏死锁的四个条件来预防死锁。

### 6.6.1 破坏互斥条件

首先考虑破坏互斥使用条件，如果资源不被一个进程独占，那么死锁肯定不会发生。但是如果两个进程同时使用某些非抢占式资源，就会造成混乱。

解决方案是：采用**假脱机技术**。该技术允许多个进程同时产生输出，但是唯一真正请求资源的是假托机管理进程，而该进程不会请求别的资源，因此不会因为这个非抢占式资源而产生死锁。

但是这种方式并不能完全预防死锁，以打印机为例。守护进程设计成再完整的输出文件就绪后才开始打印，但是若两个进程分别占用了可用假脱机磁盘空间的一半，而两个进程都缺少另一半，结果会在磁盘上出现死锁。

### 6.6.2 破坏占有并等待条件

其次考虑破坏占有并等待条件，需要禁止已经持有资源的进程再等待其他资源便可以消除死锁。

### 6.6.3 破坏不可抢占条件

### 6.6.4 破坏循环等待条件