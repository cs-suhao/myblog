## 2.4 调度
在多道程序设计系统中，如果多个进程处于就绪态，且只有一个CPU可用，这时候就需要**调度程序**决定哪一个进程可以运行，而该程序使用的算法称为**调度算法**。

### 2.4.1 调度简介

在早期以磁带上的卡片作为输入的批处理系统时代，调度算法仅仅是依次运行磁带上的每一个作业。对于多道程序设计系统，调度算法会复杂一些，因为经常有多个用户等候服务。

个人计算机的出现让情形向两个方向发展：多数时间内只有一个活动进程，以及现在CPU资源不是稀缺资源。因此调度算法在个人PC上不是那么重要。

但是在网络服务器中，调度算法很重要。因为多个进程经常竞争CPU，同时用户的体验会由于调度算法的不同而不同。

另外，调度程序还需要考虑CPU的利用率，因为进程切换的代价是比较高的。首先用户态必须切换到内核态，然后保存当前进程的状态；接着运行调度算法选定另一个进程，之后将新进程的内存映像装入MMU，会消耗大量CPU时间。

#### 2.4.1.1 进程行为

所有进程的I/O请求和计算都是交替突发的。一般而言，CPU不停顿的运行一段时间，然后发出一个系统调用来读写文件，在完成系统调用以后，CPU又开始计算。当然，这里有些I/O活动是可以看成是计算的。

在这样的情况下，有些进程花费绝大多数时间在计算上，有些在绝大多数时间在I/O上。前者称为**计算密集型**，后者称为**I/O密集型**。

随着CPU越来越快，更多的进程倾向于I/O密集型。这是因为CPU的改进比磁盘改进快的多。

#### 2.4.1.2 何时调度

由于存在需要调度处理的各种情形，所以在何时进程调度决策很重要，一般有以下集中情况：
1. 在创建新进程之后，需要决定运行父进程还是子进程。
2. 在一个进程退出时，需要从就绪进程集中选择某一个进程。
